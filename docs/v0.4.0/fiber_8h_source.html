<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libevfibers: include/evfibers/fiber.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
  var _gaq = _gaq || [];

  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libevfibers
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('fiber_8h_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">fiber.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="fiber_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/********************************************************************</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   Copyright 2013 Konstantin Olkhovskiy &lt;lupus@oxnull.net&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">   you may not use this file except in compliance with the License.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">   You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">       http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">   Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">   limitations under the License.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> ********************************************************************/</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#ifndef _FBR_FIBER_H_</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define _FBR_FIBER_H_</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#include &lt;stddef.h&gt;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="preprocessor">#include &lt;sys/socket.h&gt;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#include &lt;sys/queue.h&gt;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#include &lt;ev.h&gt;</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#include &lt;evfibers/config.h&gt;</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="code" href="fiber_8h.html#a5e2639993d3a527ba23afa9141f7d069">  156</a></span>&#160;<span class="preprocessor">#define FBR_CALL_STACK_SIZE 16</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="code" href="fiber_8h.html#aa18ca95d4c91611089fadeecc6a6ff13">  160</a></span>&#160;<span class="preprocessor">#define FBR_STACK_SIZE (64 * 1024) </span><span class="comment">/* 64 KB */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#ifdef NDEBUG</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define fbr_assert(context, expr)           ((void)(0))</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00169"></a><span class="lineno"><a class="code" href="fiber_8h.html#a2921adccfbd51435ecb82c3780916f57">  169</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define fbr_assert(context, expr)                                                             \</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">        do {                                                                                  \</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor">                __typeof__(expr) ex = (expr);                                                 \</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">                if (ex)                                                                       \</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">                        (void)(0);                                                            \</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">                else {                                                                        \</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">                        fbr_dump_stack(context, fbr_log_e);                                   \</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">                        __assert_fail(__STRING(expr), __FILE__, __LINE__, __ASSERT_FUNCTION); \</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">                }                                                                             \</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">        } while (0)</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00186"></a><span class="lineno"><a class="code" href="fiber_8h.html#a4b2672b08a4586b81917b71ef7bc8eee">  186</a></span>&#160;<span class="preprocessor">#define fbr_container_of(ptr, type, member) ({                       \</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">                const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr); \</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">                (type *)( (char *)__mptr - offsetof(type,member) );  \</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">                })</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keyword">struct </span>fbr_context_private;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__logger.html" title="Logger structure.">fbr_logger</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="code" href="structfbr__id__s.html">  194</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__id__s.html">fbr_id_s</a> {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        uint64_t g;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordtype">void</span> *p;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;} __attribute__((packed));</div>
<div class="line"><a name="l00203"></a><span class="lineno"><a class="code" href="fiber_8h.html#ad08a37907434cf705119847ed590a089">  203</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structfbr__id__s.html">fbr_id_s</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> FBR_ID_NULL;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_id_eq(<a class="code" href="structfbr__id__s.html">fbr_id_t</a> a, <a class="code" href="structfbr__id__s.html">fbr_id_t</a> b)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> a.p == b.p &amp;&amp; a.g == b.g;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_id_isnull(<a class="code" href="structfbr__id__s.html">fbr_id_t</a> a)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span> fbr_id_eq(a, FBR_ID_NULL);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="code" href="fiber_8h.html#a4b8cb982994caa4c72046dd2970fa5a6">  224</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a4b8cb982994caa4c72046dd2970fa5a6" title="Error codes used within the library.">fbr_error_code</a> {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        FBR_SUCCESS = 0,</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        FBR_EINVAL,</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;        FBR_ENOFIBER,</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        FBR_ESYSTEM,</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        FBR_EBUFFERMMAP,</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        FBR_ENOKEY,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        FBR_EPROTOBUF,</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        FBR_EBUFFERNOSPACE,</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        FBR_EEIO,</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;};</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno"><a class="code" href="structfbr__context.html">  243</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__context.html" title="Library context structure, should be initialized before any other library calls will be performed...">fbr_context</a> {</div>
<div class="line"><a name="l00244"></a><span class="lineno"><a class="code" href="structfbr__context.html#afbe19b28056d65fe75ae1c9bcd8bab69">  244</a></span>&#160;        <span class="keyword">struct </span>fbr_context_private *<a class="code" href="structfbr__context.html#afbe19b28056d65fe75ae1c9bcd8bab69">__p</a>; </div>
<div class="line"><a name="l00246"></a><span class="lineno"><a class="code" href="structfbr__context.html#ac699cdcca53ed61c0985de24922934d0">  246</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a4b8cb982994caa4c72046dd2970fa5a6" title="Error codes used within the library.">fbr_error_code</a> <a class="code" href="structfbr__context.html#ac699cdcca53ed61c0985de24922934d0">f_errno</a>; </div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="code" href="structfbr__context.html#a973d5e997ba9b23f6d68dfb192312ec6">  247</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__logger.html" title="Logger structure.">fbr_logger</a> *<a class="code" href="structfbr__context.html#a973d5e997ba9b23f6d68dfb192312ec6">logger</a>; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;};</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno"><a class="code" href="fiber_8h.html#ab8d0d2be00346d846c594c685bc04914">  253</a></span>&#160;<span class="preprocessor">#define FBR_P struct fbr_context *fctx</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00258"></a><span class="lineno"><a class="code" href="fiber_8h.html#a9a5df8d937d7e862e3782cb83341b780">  258</a></span>&#160;<span class="preprocessor">#define FBR_PU __attribute__((unused)) FBR_P</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00264"></a><span class="lineno"><a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e">  264</a></span>&#160;<span class="preprocessor">#define FBR_P_ FBR_P,</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00269"></a><span class="lineno"><a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c">  269</a></span>&#160;<span class="preprocessor">#define FBR_PU_ __attribute__((unused)) FBR_P_</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00274"></a><span class="lineno"><a class="code" href="fiber_8h.html#a859f83b1e62a2e66d9e2b45890a368c5">  274</a></span>&#160;<span class="preprocessor">#define FBR_A fctx</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe">  280</a></span>&#160;<span class="preprocessor">#define FBR_A_ FBR_A,</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00291"></a><span class="lineno"><a class="code" href="fiber_8h.html#a7b11ce8e4d8a3cdfe9e7ea43598761b2">  291</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="fiber_8h.html#a7b11ce8e4d8a3cdfe9e7ea43598761b2" title="Fiber&#39;s ``main&#39;&#39; function type.">fbr_fiber_func_t</a>)(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">void</span> *_arg);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno"><a class="code" href="fiber_8h.html#a68c6e67a55e140618c243d1d1e6d29e7">  305</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="fiber_8h.html#a68c6e67a55e140618c243d1d1e6d29e7" title="(DEPRECATED) Destructor function type for the memory allocated in a fiber.">fbr_alloc_destructor_func_t</a>)(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">void</span> *ptr, <span class="keywordtype">void</span> *context);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00312"></a><span class="lineno"><a class="code" href="fiber_8h.html#a5d63a523db6c2493dc2b650dcbed9be3">  312</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a5d63a523db6c2493dc2b650dcbed9be3" title="Logging levels.">fbr_log_level</a> {</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        FBR_LOG_ERROR = 0,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        FBR_LOG_WARNING,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        FBR_LOG_NOTICE,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        FBR_LOG_INFO,</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        FBR_LOG_DEBUG</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;};</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__logger.html" title="Logger structure.">fbr_logger</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div>
<div class="line"><a name="l00334"></a><span class="lineno"><a class="code" href="fiber_8h.html#abcc45eba652c34b021a4dceddc485135">  334</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="fiber_8h.html#abcc45eba652c34b021a4dceddc485135" title="Logger function type.">fbr_log_func_t</a>)(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct </span><a class="code" href="structfbr__logger.html" title="Logger structure.">fbr_logger</a> *logger,</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a5d63a523db6c2493dc2b650dcbed9be3" title="Logging levels.">fbr_log_level</a> <a class="code" href="structfbr__logger.html#abc75787744bb9fcb2497dc74622a7073">level</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *format, va_list ap);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="code" href="fiber_8h.html#a0a1d0579fe89b13fab05a3ad54e61188">  345</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="fiber_8h.html#a0a1d0579fe89b13fab05a3ad54e61188" title="Logger utility function type.">fbr_logutil_func_t</a>)(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *format, ...);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno"><a class="code" href="structfbr__logger.html">  352</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__logger.html" title="Logger structure.">fbr_logger</a> {</div>
<div class="line"><a name="l00353"></a><span class="lineno"><a class="code" href="structfbr__logger.html#a94ecd05fbc21a742155184d42cf469d3">  353</a></span>&#160;        <a class="code" href="fiber_8h.html#abcc45eba652c34b021a4dceddc485135" title="Logger function type.">fbr_log_func_t</a> <a class="code" href="structfbr__logger.html#a94ecd05fbc21a742155184d42cf469d3">logv</a>; </div>
<div class="line"><a name="l00354"></a><span class="lineno"><a class="code" href="structfbr__logger.html#abc75787744bb9fcb2497dc74622a7073">  354</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a5d63a523db6c2493dc2b650dcbed9be3" title="Logging levels.">fbr_log_level</a> <a class="code" href="structfbr__logger.html#abc75787744bb9fcb2497dc74622a7073">level</a>; </div>
<div class="line"><a name="l00355"></a><span class="lineno"><a class="code" href="structfbr__logger.html#a98e30bab00cfe27245ceb46259e8a249">  355</a></span>&#160;        <span class="keywordtype">void</span> *<a class="code" href="structfbr__logger.html#a98e30bab00cfe27245ceb46259e8a249">data</a>; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;};</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_need_log(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a5d63a523db6c2493dc2b650dcbed9be3" title="Logging levels.">fbr_log_level</a> level)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">return</span> level &lt;= fctx-&gt;logger-&gt;level;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> fbr_set_log_level(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a5d63a523db6c2493dc2b650dcbed9be3" title="Logging levels.">fbr_log_level</a> desired_level)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        fctx-&gt;logger-&gt;level = desired_level;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div>
<div class="line"><a name="l00382"></a><span class="lineno"><a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409ee">  382</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409ee" title="Type of events supported by the library.">fbr_ev_type</a> {</div>
<div class="line"><a name="l00383"></a><span class="lineno"><a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409eea6a6285430da9ea418e18093929066d35">  383</a></span>&#160;        <a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409eea6a6285430da9ea418e18093929066d35">FBR_EV_WATCHER</a> = 1, </div>
<div class="line"><a name="l00384"></a><span class="lineno"><a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409eea200a3dc22cf18bfbcc9fe1201c2198a5">  384</a></span>&#160;        <a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409eea200a3dc22cf18bfbcc9fe1201c2198a5">FBR_EV_MUTEX</a>, </div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409eeaf1250fc8e958238e6347f1373623224f">  385</a></span>&#160;        <a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409eeaf1250fc8e958238e6347f1373623224f">FBR_EV_COND_VAR</a>, </div>
<div class="line"><a name="l00386"></a><span class="lineno"><a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409eea0854994f9f2dfe14081bb798ca503516">  386</a></span>&#160;        <a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409eea0854994f9f2dfe14081bb798ca503516">FBR_EV_EIO</a>, </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;};</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a>;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00400"></a><span class="lineno"><a class="code" href="fiber_8h.html#a95e135c1ab08d957fcde1e5baf21a43e">  400</a></span>&#160;<span class="keyword">typedef</span> void (*<a class="code" href="fiber_8h.html#a95e135c1ab08d957fcde1e5baf21a43e" title="Destructor function type.">fbr_destructor_func_t</a>)(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">void</span> *arg);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno"><a class="code" href="structfbr__destructor.html">  421</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__destructor.html" title="Destructor structure.">fbr_destructor</a> {</div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="code" href="structfbr__destructor.html#a40ea0949c50013f9c5c49bb06ae9c1b6">  422</a></span>&#160;        <a class="code" href="fiber_8h.html#a95e135c1ab08d957fcde1e5baf21a43e" title="Destructor function type.">fbr_destructor_func_t</a> <a class="code" href="structfbr__destructor.html#a40ea0949c50013f9c5c49bb06ae9c1b6">func</a>; </div>
<div class="line"><a name="l00423"></a><span class="lineno"><a class="code" href="structfbr__destructor.html#a300412a2fa2bad7ea4c4693cfaf487a4">  423</a></span>&#160;        <span class="keywordtype">void</span> *<a class="code" href="structfbr__destructor.html#a300412a2fa2bad7ea4c4693cfaf487a4">arg</a>; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        TAILQ_ENTRY(<a class="code" href="structfbr__destructor.html" title="Destructor structure.">fbr_destructor</a>) entries; <span class="comment">//Private</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordtype">int</span> active; <span class="comment">//Private</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;};</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="preprocessor">#define FBR_DESTRUCTOR_INITIALIZER { \</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="preprocessor">        .func   = NULL,              \</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="preprocessor">        .arg    = NULL,              \</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="preprocessor">        .active = 0,                 \</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="preprocessor">};</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="keyword">struct </span>fbr_id_tailq;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div>
<div class="line"><a name="l00436"></a><span class="lineno"><a class="code" href="structfbr__id__tailq__i.html">  436</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__id__tailq__i.html">fbr_id_tailq_i</a> {</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="comment">/* Private structure */</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="structfbr__id__s.html">fbr_id_t</a> id;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a> *ev;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        TAILQ_ENTRY(<a class="code" href="structfbr__id__tailq__i.html">fbr_id_tailq_i</a>) entries;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__destructor.html" title="Destructor structure.">fbr_destructor</a> dtor;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keyword">struct </span>fbr_id_tailq *head;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;};</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;TAILQ_HEAD(fbr_id_tailq, <a class="code" href="structfbr__id__tailq__i.html">fbr_id_tailq_i</a>);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno"><a class="code" href="structfbr__ev__base.html">  455</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a> {</div>
<div class="line"><a name="l00456"></a><span class="lineno"><a class="code" href="structfbr__ev__base.html#a752293e8c8444f094f46a2e169b628a7">  456</a></span>&#160;        <span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a61e29a575eecbcfef017b66bee4409ee" title="Type of events supported by the library.">fbr_ev_type</a> <a class="code" href="structfbr__ev__base.html#a752293e8c8444f094f46a2e169b628a7">type</a>; </div>
<div class="line"><a name="l00457"></a><span class="lineno"><a class="code" href="structfbr__ev__base.html#afd094af153a29b97c35f19a63feb27b7">  457</a></span>&#160;        <a class="code" href="structfbr__id__s.html">fbr_id_t</a> <a class="code" href="structfbr__ev__base.html#afd094af153a29b97c35f19a63feb27b7">id</a>; </div>
<div class="line"><a name="l00458"></a><span class="lineno"><a class="code" href="structfbr__ev__base.html#a31e42dd9697aeb6ffa3e2f6ee30fde9a">  458</a></span>&#160;        <span class="keywordtype">int</span> <a class="code" href="structfbr__ev__base.html#a31e42dd9697aeb6ffa3e2f6ee30fde9a">arrived</a>; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__context.html" title="Library context structure, should be initialized before any other library calls will be performed...">fbr_context</a> *fctx; <span class="comment">//Private</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordtype">void</span> *data; <span class="comment">//Private</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__id__tailq__i.html">fbr_id_tailq_i</a> item; <span class="comment">//Private</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;};</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00472"></a><span class="lineno"><a class="code" href="fiber_8h.html#ac5a180f9a74fb4049263f54123501bc0">  472</a></span>&#160;<span class="preprocessor">#define fbr_ev_upcast(ptr, type_no_struct) \</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="preprocessor">       fbr_container_of(ptr, struct type_no_struct, ev_base)</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00484"></a><span class="lineno"><a class="code" href="structfbr__ev__watcher.html">  484</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__ev__watcher.html" title="libev watcher event.">fbr_ev_watcher</a> {</div>
<div class="line"><a name="l00485"></a><span class="lineno"><a class="code" href="structfbr__ev__watcher.html#aa013ad224d66e3a0996a542d014f807b">  485</a></span>&#160;        ev_watcher *<a class="code" href="structfbr__ev__watcher.html#aa013ad224d66e3a0996a542d014f807b">w</a>; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a> ev_base;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;};</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno"><a class="code" href="structfbr__ev__mutex.html">  496</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__ev__mutex.html" title="fbr_mutex event.">fbr_ev_mutex</a> {</div>
<div class="line"><a name="l00497"></a><span class="lineno"><a class="code" href="structfbr__ev__mutex.html#a653be1000d335d8ec657b4ed7a423de8">  497</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *<a class="code" href="structfbr__ev__mutex.html#a653be1000d335d8ec657b4ed7a423de8">mutex</a>; </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a> ev_base;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;};</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00508"></a><span class="lineno"><a class="code" href="structfbr__ev__cond__var.html">  508</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__ev__cond__var.html" title="fbr_cond_var event.">fbr_ev_cond_var</a> {</div>
<div class="line"><a name="l00509"></a><span class="lineno"><a class="code" href="structfbr__ev__cond__var.html#af220784e894914c8c2ad00baf5881fca">  509</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *cond; </div>
<div class="line"><a name="l00511"></a><span class="lineno"><a class="code" href="structfbr__ev__cond__var.html#ab39156d7018dc42e0c6f256f3e4e815a">  511</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *<a class="code" href="structfbr__ev__cond__var.html#ab39156d7018dc42e0c6f256f3e4e815a">mutex</a>; </div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a> ev_base;</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;};</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00522"></a><span class="lineno"><a class="code" href="structfbr__mutex.html">  522</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="structfbr__id__s.html">fbr_id_t</a> locked_by;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keyword">struct </span>fbr_id_tailq pending;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        TAILQ_ENTRY(<a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a>) entries;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;};</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="code" href="structfbr__cond__var.html">  535</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> {</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        <span class="keyword">struct </span>fbr_id_tailq waiting;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;};</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="code" href="structfbr__vrb.html">  549</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <span class="keywordtype">void</span> *mem_ptr;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;        <span class="keywordtype">size_t</span> mem_ptr_size;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordtype">void</span> *lower_ptr;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordtype">void</span> *upper_ptr;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        <span class="keywordtype">size_t</span> ptr_size;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        <span class="keywordtype">void</span> *data_ptr;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordtype">void</span> *space_ptr;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;};</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00569"></a><span class="lineno"><a class="code" href="structfbr__buffer.html">  569</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> vrb;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;        <span class="keywordtype">size_t</span> prepared_bytes;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <span class="keywordtype">size_t</span> waiting_bytes;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> committed_cond;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> write_mutex;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> bytes_freed_cond;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> read_mutex;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;};</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div>
<div class="line"><a name="l00587"></a><span class="lineno"><a class="code" href="fiber_8h.html#a6a327243ec5baeb5b3145c6624d0977c">  587</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="fiber_8h.html#a6a327243ec5baeb5b3145c6624d0977c" title="Fiber-local data key.">fbr_key_t</a>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00593"></a><span class="lineno"><a class="code" href="fiber_8h.html#ab90268e5d39e751737de0f6aaf71a1c4">  593</a></span>&#160;<span class="preprocessor">#define FBR_MAX_KEY 64</span></div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="keywordtype">void</span> fbr_destructor_add(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__destructor.html" title="Destructor structure.">fbr_destructor</a> *dtor);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="keywordtype">void</span> fbr_destructor_remove(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__destructor.html" title="Destructor structure.">fbr_destructor</a> *dtor,</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="keywordtype">int</span> call);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> fbr_destructor_init(<span class="keyword">struct</span> <a class="code" href="structfbr__destructor.html" title="Destructor structure.">fbr_destructor</a> *dtor)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        memset(dtor, 0x00, <span class="keyword">sizeof</span>(*dtor));</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;}</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="keywordtype">void</span> fbr_ev_watcher_init(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__ev__watcher.html" title="libev watcher event.">fbr_ev_watcher</a> *ev, ev_watcher *w);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;<span class="keywordtype">void</span> fbr_ev_mutex_init(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__ev__mutex.html" title="fbr_mutex event.">fbr_ev_mutex</a> *ev,</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="keyword">struct</span> <a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="keywordtype">void</span> fbr_ev_cond_var_init(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__ev__cond__var.html" title="fbr_cond_var event.">fbr_ev_cond_var</a> *ev,</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                <span class="keyword">struct</span> <a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *cond, <span class="keyword">struct</span> <a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="keywordtype">int</span> fbr_ev_wait_one(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a> *one);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="keywordtype">int</span> fbr_ev_wait(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a> *events[]);</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="keywordtype">int</span> fbr_ev_wait_to(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__ev__base.html" title="Base struct for all events.">fbr_ev_base</a> *events[], ev_tstamp timeout);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="keywordtype">int</span> fbr_transfer(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> to);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#a5aae42537a1db369f308cba59985b662" title="Initializes the library context.">fbr_init</a>(<span class="keyword">struct</span> <a class="code" href="structfbr__context.html" title="Library context structure, should be initialized before any other library calls will be performed...">fbr_context</a> *fctx, <span class="keyword">struct</span> ev_loop *loop);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="keywordtype">void</span> fbr_destroy(<a class="code" href="fiber_8h.html#ab8d0d2be00346d846c594c685bc04914" title="Utility macro for context parameter used in function prototypes.">FBR_P</a>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#ad4632e5653fe6aed586b9dfd23716708" title="Enables/Disables backtrace capturing.">fbr_enable_backtraces</a>(<a class="code" href="fiber_8h.html#ab8d0d2be00346d846c594c685bc04914" title="Utility macro for context parameter used in function prototypes.">FBR_P</a>, <span class="keywordtype">int</span> enabled);</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="fiber_8h.html#a490cd2689aedc1ca0e60404a47b7f550" title="Analog of strerror but for the library errno.">fbr_strerror</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">enum</span> <a class="code" href="fiber_8h.html#a4b8cb982994caa4c72046dd2970fa5a6" title="Error codes used within the library.">fbr_error_code</a> code);</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#a1175cd695bd850bfb6d277432e0e7a0c" title="Utility log wrapper.">fbr_log_e</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *format, ...)</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        __attribute__ ((format (printf, 2, 3)));</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#a5a69c39229c1d71f9391682e994c1ed0" title="Utility log wrapper.">fbr_log_w</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> const <span class="keywordtype">char</span> *format, ...)</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        __attribute__ ((format (printf, 2, 3)));</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#ae2bf0d14636801edb0d66dc388a2616f" title="Utility log wrapper.">fbr_log_n</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> const <span class="keywordtype">char</span> *format, ...)</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        __attribute__ ((format (printf, 2, 3)));</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#aa815bc8cf6b125b76e852a41dd488812" title="Utility log wrapper.">fbr_log_i</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> const <span class="keywordtype">char</span> *format, ...)</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        __attribute__ ((format (printf, 2, 3)));</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#ad72c35cd4b120be1c6e97c45f50dc6dc" title="Utility log wrapper.">fbr_log_d</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> const <span class="keywordtype">char</span> *format, ...)</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        __attribute__ ((format (printf, 2, 3)));</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div>
<div class="line"><a name="l00828"></a><span class="lineno"><a class="code" href="fiber_8h.html#a6d1cdd23d3dbdb762bb440d5e0b49081">  828</a></span>&#160;<span class="preprocessor">#define FBR_MAX_FIBER_NAME 64</span></div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;<a class="code" href="structfbr__id__s.html">fbr_id_t</a> fbr_create(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *name, <a class="code" href="fiber_8h.html#a7b11ce8e4d8a3cdfe9e7ea43598761b2" title="Fiber&#39;s ``main&#39;&#39; function type.">fbr_fiber_func_t</a> <a class="code" href="structfbr__destructor.html#a40ea0949c50013f9c5c49bb06ae9c1b6">func</a>, <span class="keywordtype">void</span> *<a class="code" href="structfbr__destructor.html#a300412a2fa2bad7ea4c4693cfaf487a4">arg</a>,</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                <span class="keywordtype">size_t</span> stack_size);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *fbr_get_name(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="keywordtype">int</span> fbr_set_name(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> <span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *name);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="keywordtype">int</span> fbr_disown(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> parent);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<a class="code" href="structfbr__id__s.html">fbr_id_t</a> fbr_parent(<a class="code" href="fiber_8h.html#ab8d0d2be00346d846c594c685bc04914" title="Utility macro for context parameter used in function prototypes.">FBR_P</a>);</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="keywordtype">int</span> fbr_reclaim(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> fiber);</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="keywordtype">int</span> fbr_set_reclaim(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> fiber);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="keywordtype">int</span> fbr_set_noreclaim(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> fiber);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="keywordtype">int</span> fbr_want_reclaim(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> fiber);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="keywordtype">int</span> <a class="code" href="fiber_8h.html#a5a1228e6d3c768a4b91f265de750c14a" title="Tests if given fiber is reclaimed.">fbr_is_reclaimed</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> fiber);</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<a class="code" href="structfbr__id__s.html">fbr_id_t</a> fbr_self(<a class="code" href="fiber_8h.html#ab8d0d2be00346d846c594c685bc04914" title="Utility macro for context parameter used in function prototypes.">FBR_P</a>);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="keywordtype">int</span> fbr_key_create(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="fiber_8h.html#a6a327243ec5baeb5b3145c6624d0977c" title="Fiber-local data key.">fbr_key_t</a> *key);</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="keywordtype">int</span> fbr_key_delete(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="fiber_8h.html#a6a327243ec5baeb5b3145c6624d0977c" title="Fiber-local data key.">fbr_key_t</a> key);</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="keywordtype">int</span> fbr_key_set(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> <span class="keywordtype">id</span>, <a class="code" href="fiber_8h.html#a6a327243ec5baeb5b3145c6624d0977c" title="Fiber-local data key.">fbr_key_t</a> key, <span class="keywordtype">void</span> *value);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;</div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="keywordtype">void</span> *fbr_key_get(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> <span class="keywordtype">id</span>, <a class="code" href="fiber_8h.html#a6a327243ec5baeb5b3145c6624d0977c" title="Fiber-local data key.">fbr_key_t</a> key);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="keywordtype">void</span> fbr_yield(<a class="code" href="fiber_8h.html#ab8d0d2be00346d846c594c685bc04914" title="Utility macro for context parameter used in function prototypes.">FBR_P</a>);</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#a9d7bedaf3d6d32f2ed0b2f400a5970a5" title="Yields execution to other fiber returning the execution at the next event loop run.">fbr_cooperate</a>(<a class="code" href="fiber_8h.html#ab8d0d2be00346d846c594c685bc04914" title="Utility macro for context parameter used in function prototypes.">FBR_P</a>);</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="keywordtype">void</span> *fbr_alloc(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#ac02d87e0172f8765a5caeda2ab33afae" title="(DEPRECATED) Sets destructor for a memory chunk.">fbr_alloc_set_destructor</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">void</span> *ptr, <a class="code" href="fiber_8h.html#a68c6e67a55e140618c243d1d1e6d29e7" title="(DEPRECATED) Destructor function type for the memory allocated in a fiber.">fbr_alloc_destructor_func_t</a> <a class="code" href="structfbr__destructor.html#a40ea0949c50013f9c5c49bb06ae9c1b6">func</a>,</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;                <span class="keywordtype">void</span> *context);</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="keywordtype">void</span> *fbr_calloc(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nmemb, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="keywordtype">void</span> fbr_free(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">void</span> *ptr);</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="keywordtype">void</span> fbr_free_nd(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">void</span> *ptr);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="keywordtype">int</span> fbr_fd_nonblock(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> fd);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;<span class="keywordtype">int</span> fbr_connect(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *addr,</div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                   socklen_t addrlen);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;ssize_t fbr_read(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> fd, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> count);</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;ssize_t fbr_read_all(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> fd, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> count);</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;ssize_t fbr_readline(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> fd, <span class="keywordtype">void</span> *buffer, <span class="keywordtype">size_t</span> n);</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;ssize_t fbr_write(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> count);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;ssize_t fbr_write_all(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> count);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;ssize_t fbr_recvfrom(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> sockfd, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len, <span class="keywordtype">int</span> flags,</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                <span class="keyword">struct</span> sockaddr *src_addr, socklen_t *addrlen);</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;ssize_t fbr_recv(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> sockfd, <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len, <span class="keywordtype">int</span> flags);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;ssize_t fbr_sendto(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> sockfd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len, <span class="keywordtype">int</span> flags, <span class="keyword">const</span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                <span class="keyword">struct</span> sockaddr *dest_addr, socklen_t addrlen);</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;ssize_t fbr_send(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> sockfd, <span class="keyword">const</span> <span class="keywordtype">void</span> *buf, <span class="keywordtype">size_t</span> len, <span class="keywordtype">int</span> flags);</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="keywordtype">int</span> fbr_accept(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keywordtype">int</span> sockfd, <span class="keyword">struct</span> sockaddr *addr, socklen_t *addrlen);</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;ev_tstamp fbr_sleep(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> ev_tstamp seconds);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="keywordtype">void</span> fbr_dump_stack(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="fiber_8h.html#a0a1d0579fe89b13fab05a3ad54e61188" title="Logger utility function type.">fbr_logutil_func_t</a> log);</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#a5cb28512c5d778bb621fdf3e633fa461" title="Initializes a mutex.">fbr_mutex_init</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex);</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="keywordtype">void</span> fbr_mutex_lock(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex);</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="keywordtype">int</span> fbr_mutex_trylock(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex);</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;</div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="keywordtype">void</span> fbr_mutex_unlock(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex);</div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#a8dce5f86a2fbcbd59863ddb7dd882ec5" title="Destroys a mutex.">fbr_mutex_destroy</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#a7ce468de0b1706afe9a3635302418705" title="Initializes a conditional variable.">fbr_cond_init</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *cond);</div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="keywordtype">void</span> <a class="code" href="fiber_8h.html#a1a852b3dc4dd0c187845618843d1aea2" title="Destroys a conditional variable.">fbr_cond_destroy</a>(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *cond);</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;<span class="keywordtype">int</span> fbr_cond_wait(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *cond, <span class="keyword">struct</span> <a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> *mutex);</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="keywordtype">void</span> fbr_cond_broadcast(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *cond);</div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;<span class="keywordtype">void</span> fbr_cond_signal(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *cond);</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;<span class="keywordtype">int</span> fbr_vrb_init(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb, <span class="keywordtype">size_t</span> size, <span class="keyword">const</span> <span class="keywordtype">char</span> *file_pattern);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="keywordtype">void</span> fbr_vrb_destroy(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb);</div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> fbr_vrb_data_len(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb)</div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;{</div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;        <span class="keywordflow">return</span> vrb-&gt;space_ptr - vrb-&gt;data_ptr;</div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;}</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> fbr_vrb_space_len(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb)</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;{</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        <span class="keywordflow">return</span> vrb-&gt;data_ptr + vrb-&gt;ptr_size - vrb-&gt;space_ptr;</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;}</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> fbr_vrb_capacity(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb)</div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;{</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordflow">return</span> vrb-&gt;ptr_size;</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;}</div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *fbr_vrb_space_ptr(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb)</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;{</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <span class="keywordflow">return</span> vrb-&gt;space_ptr;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;}</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *fbr_vrb_data_ptr(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb)</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;{</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        <span class="keywordflow">return</span> vrb-&gt;data_ptr;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;}</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_vrb_give(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb, <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;{</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        <span class="keywordflow">if</span> (size &gt; fbr_vrb_space_len(vrb))</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        vrb-&gt;space_ptr += size;</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;}</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_vrb_take(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb, <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;{</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;        <span class="keywordflow">if</span> (size &gt; fbr_vrb_data_len(vrb))</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;        vrb-&gt;data_ptr += size;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;        <span class="keywordflow">if</span> (vrb-&gt;data_ptr &gt;= vrb-&gt;upper_ptr) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                vrb-&gt;data_ptr -= vrb-&gt;ptr_size;</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                vrb-&gt;space_ptr -= vrb-&gt;ptr_size;</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;        }</div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;}</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> fbr_vrb_reset(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb)</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;{</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        vrb-&gt;data_ptr = vrb-&gt;lower_ptr;</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        vrb-&gt;space_ptr = vrb-&gt;lower_ptr;</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;}</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="comment">/* Private function */</span></div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="keywordtype">int</span> fbr_vrb_resize_do(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb, <span class="keywordtype">size_t</span> new_size,</div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">char</span> *file_pattern);</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_vrb_resize(<span class="keyword">struct</span> <a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> *vrb, <span class="keywordtype">size_t</span> new_size,</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                <span class="keyword">const</span> <span class="keywordtype">char</span> *file_pattern)</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;{</div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__vrb.html" title="Virtual ring buffer implementation.">fbr_vrb</a> tmp;</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;        <span class="keywordtype">int</span> rv;</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">if</span> (fbr_vrb_capacity(vrb) &gt;= new_size)</div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;        memcpy(&amp;tmp, vrb, <span class="keyword">sizeof</span>(tmp));</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;        rv = fbr_vrb_init(vrb, new_size, file_pattern);</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordflow">if</span> (rv) {</div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                memcpy(vrb, &amp;tmp, <span class="keyword">sizeof</span>(tmp));</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                <span class="keywordflow">return</span> rv;</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;        }</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;        memcpy(fbr_vrb_space_ptr(vrb), fbr_vrb_data_ptr(&amp;tmp),</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;                        fbr_vrb_data_len(&amp;tmp));</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;        fbr_vrb_give(vrb, fbr_vrb_data_len(&amp;tmp));</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        fbr_vrb_destroy(&amp;tmp);</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;}</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="keywordtype">int</span> fbr_buffer_init(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> fbr_buffer_bytes(<a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c" title="Same as FBR_P_ but unused attribute.">FBR_PU_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer)</div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;{</div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordflow">return</span> fbr_vrb_data_len(&amp;buffer-&gt;vrb);</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;}</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> fbr_buffer_free_bytes(<a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c" title="Same as FBR_P_ but unused attribute.">FBR_PU_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer)</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;{</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;        <span class="keywordflow">return</span> fbr_vrb_space_len(&amp;buffer-&gt;vrb);</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;}</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> fbr_buffer_size(<a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c" title="Same as FBR_P_ but unused attribute.">FBR_PU_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer)</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;{</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;        <span class="keywordflow">return</span> fbr_vrb_capacity(&amp;buffer-&gt;vrb);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;}</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *fbr_buffer_space_ptr(<a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c" title="Same as FBR_P_ but unused attribute.">FBR_PU_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer)</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;{</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        <span class="keywordflow">return</span> fbr_vrb_space_ptr(&amp;buffer-&gt;vrb);</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;}</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> *fbr_buffer_data_ptr(<a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c" title="Same as FBR_P_ but unused attribute.">FBR_PU_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer)</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;{</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        <span class="keywordflow">return</span> fbr_vrb_data_ptr(&amp;buffer-&gt;vrb);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;}</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> fbr_buffer_reset(<a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c" title="Same as FBR_P_ but unused attribute.">FBR_PU_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer)</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;{</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        fbr_vrb_reset(&amp;buffer-&gt;vrb);</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;}</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<span class="keywordtype">void</span> fbr_buffer_destroy(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer);</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="keywordtype">void</span> *fbr_buffer_alloc_prepare(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="keywordtype">void</span> fbr_buffer_alloc_commit(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer);</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;<span class="keywordtype">void</span> fbr_buffer_alloc_abort(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer);</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="keywordtype">void</span> *fbr_buffer_read_address(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="keywordtype">void</span> fbr_buffer_read_advance(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="keywordtype">void</span> fbr_buffer_read_discard(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;<span class="keywordtype">int</span> fbr_buffer_resize(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer, <span class="keywordtype">size_t</span> size);</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *fbr_buffer_cond_read(<a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c" title="Same as FBR_P_ but unused attribute.">FBR_PU_</a></div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;                <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer)</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;{</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordflow">return</span> &amp;buffer-&gt;committed_cond;</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;}</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">struct </span><a class="code" href="structfbr__cond__var.html" title="Conditional variable structure.">fbr_cond_var</a> *fbr_buffer_cond_write(<a class="code" href="fiber_8h.html#af4be6502fa23d9804b2b178bd3f96f3c" title="Same as FBR_P_ but unused attribute.">FBR_PU_</a></div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;                <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer)</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;{</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <span class="keywordflow">return</span> &amp;buffer-&gt;bytes_freed_cond;</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;}</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_buffer_wait_read(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer,</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;{</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> mutex;</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keywordtype">int</span> retval;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        <a class="code" href="fiber_8h.html#a5cb28512c5d778bb621fdf3e633fa461" title="Initializes a mutex.">fbr_mutex_init</a>(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;mutex);</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        fbr_mutex_lock(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;mutex);</div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        <span class="keywordflow">while</span> (fbr_buffer_bytes(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> buffer) &lt; size) {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;                retval = fbr_cond_wait(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;buffer-&gt;committed_cond, &amp;mutex);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;                assert(0 == retval);</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;                (void)retval;</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;        }</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        fbr_mutex_unlock(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;mutex);</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <a class="code" href="fiber_8h.html#a8dce5f86a2fbcbd59863ddb7dd882ec5" title="Destroys a mutex.">fbr_mutex_destroy</a>(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;mutex);</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;}</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_buffer_can_read(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer,</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;{</div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;        <span class="keywordflow">return</span> fbr_buffer_bytes(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> buffer) &gt;= size;</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;}</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_buffer_wait_write(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer,</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;{</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;        <span class="keyword">struct </span><a class="code" href="structfbr__mutex.html" title="Mutex structure.">fbr_mutex</a> mutex;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;        <span class="keywordtype">int</span> retval;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;        <a class="code" href="fiber_8h.html#a5cb28512c5d778bb621fdf3e633fa461" title="Initializes a mutex.">fbr_mutex_init</a>(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;mutex);</div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;        fbr_mutex_lock(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;mutex);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;        <span class="keywordflow">while</span> (fbr_buffer_free_bytes(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> buffer) &lt; size) {</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                retval = fbr_cond_wait(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;buffer-&gt;bytes_freed_cond,</div>
<div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                                &amp;mutex);</div>
<div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                assert(0 == retval);</div>
<div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                (void)retval;</div>
<div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        }</div>
<div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;        fbr_mutex_unlock(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;mutex);</div>
<div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        <a class="code" href="fiber_8h.html#a8dce5f86a2fbcbd59863ddb7dd882ec5" title="Destroys a mutex.">fbr_mutex_destroy</a>(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> &amp;mutex);</div>
<div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;}</div>
<div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> fbr_buffer_can_write(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">struct</span> <a class="code" href="structfbr__buffer.html" title="Inter-fiber communication pipe.">fbr_buffer</a> *buffer,</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;                <span class="keywordtype">size_t</span> size)</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;{</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;        <span class="keywordflow">return</span> fbr_buffer_free_bytes(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> buffer) &gt;= size;</div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;}</div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="keywordtype">void</span> *fbr_get_user_data(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="keywordtype">int</span> fbr_set_user_data(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <a class="code" href="structfbr__id__s.html">fbr_id_t</a> <span class="keywordtype">id</span>, <span class="keywordtype">void</span> *data);</div>
<div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div>
<div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;pid_t fbr_popen3(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">char</span> *<span class="keyword">const</span> argv[],</div>
<div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;                <span class="keywordtype">char</span> *<span class="keyword">const</span> envp[], <span class="keyword">const</span> <span class="keywordtype">char</span> *working_dir,</div>
<div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;                <span class="keywordtype">int</span> *stdin_w_ptr, <span class="keywordtype">int</span> *stdout_r_ptr, <span class="keywordtype">int</span> *stderr_r_ptr);</div>
<div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;</div>
<div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> pid_t fbr_popen2(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">char</span> *<span class="keyword">const</span> argv[],</div>
<div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;                <span class="keywordtype">char</span> *<span class="keyword">const</span> envp[], <span class="keyword">const</span> <span class="keywordtype">char</span> *working_dir, <span class="keywordtype">int</span> *stdin_w_ptr,</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;                <span class="keywordtype">int</span> *stdout_r_ptr)</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;{</div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="keywordflow">return</span> fbr_popen3(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> filename, argv, envp, working_dir, stdin_w_ptr,</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                        stdout_r_ptr, NULL);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;}</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> pid_t fbr_popen0(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">char</span> *<span class="keyword">const</span> argv[],</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;                <span class="keywordtype">char</span> *<span class="keyword">const</span> envp[], <span class="keyword">const</span> <span class="keywordtype">char</span> *working_dir)</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;{</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <span class="keywordflow">return</span> fbr_popen3(<a class="code" href="fiber_8h.html#adf0be839ad4001538c83fa3637bd7dbe" title="Same as FBR_A, but with comma afterwards for invocations of functions that require more that one para...">FBR_A_</a> filename, argv, envp, working_dir, NULL, NULL,</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;                        NULL);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;}</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;<span class="keywordtype">int</span> fbr_waitpid(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> pid_t pid);</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="keywordtype">int</span> fbr_system(<a class="code" href="fiber_8h.html#a1d223ea2c3abc8cc7e3b4b9f80fb733e" title="Same as FBR_P, but with comma afterwards for use in functions that accept more that one parameter (wh...">FBR_P_</a> <span class="keyword">const</span> <span class="keywordtype">char</span> *filename, <span class="keywordtype">char</span> *<span class="keyword">const</span> argv[],</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                <span class="keywordtype">char</span> *<span class="keyword">const</span> envp[], <span class="keyword">const</span> <span class="keywordtype">char</span> *working_dir);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;</div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;<span class="preprocessor">#endif</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_5566bd5272a8f8db2e6a21f1105b917f.html">evfibers</a></li><li class="navelem"><a class="el" href="fiber_8h.html">fiber.h</a></li>
    <li class="footer">Generated on Thu Mar 13 2014 17:32:09 for libevfibers by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1.2 </li>
  </ul>
</div>
</body>
</html>
